"use strict";(self.webpackChunkdocusaurus_test=self.webpackChunkdocusaurus_test||[]).push([[492],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=a,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},970:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>l,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={},i="Development Environment",l={unversionedId:"hpl2/dev-env",id:"hpl2/dev-env",title:"Development Environment",description:"In order to mod Amnesia comfortably, you will need to set up the game so you can easily test maps and reload scripts. To do that, it is recommended to have two in-game users; a regular one (for testing how the mod works for the player) and a developer one. This article is about the basic set up of a developer user.",source:"@site/docs/hpl2/dev-env.md",sourceDirName:"hpl2",slug:"/hpl2/dev-env",permalink:"/hpl/docs/hpl2/dev-env",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Tools",permalink:"/hpl/docs/hpl2/tools"},next:{title:"HPL3",permalink:"/hpl/docs/category/hpl3"}},s={},p=[{value:"Setting up a dev user",id:"setting-up-a-dev-user",level:2},{value:"Script debug",id:"script-debug",level:2},{value:"Loading directly into a map",id:"loading-directly-into-a-map",level:2}],u={toc:p},d="wrapper";function c(e){let{components:t,...n}=e;return(0,a.kt)(d,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"development-environment"},"Development Environment"),(0,a.kt)("p",null,"In order to mod Amnesia comfortably, you will need to set up the game so you can easily test maps and reload scripts. To do that, it is recommended to have two in-game users; a regular one (for testing how the mod works for the player) and a developer one. This article is about the basic set up of a developer user."),(0,a.kt)("h2",{id:"setting-up-a-dev-user"},"Setting up a dev user"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Enter the game (or Full Conversion mod) normally, create a profile name (e.g. dev_user) and then exit."),(0,a.kt)("li",{parentName:"ol"},"Enter the saves directory. Open ",(0,a.kt)("inlineCode",{parentName:"li"},"main_settings.cfg")," and set ",(0,a.kt)("inlineCode",{parentName:"li"},'LoadDebugMenu="true"'),"."),(0,a.kt)("li",{parentName:"ol"},"You must set ",(0,a.kt)("inlineCode",{parentName:"li"},'ForceCacheLoadingAndSkipSaving="false"')," or certain map changes will not show!"),(0,a.kt)("li",{parentName:"ol"},"(Optional) Set ",(0,a.kt)("inlineCode",{parentName:"li"},'ShowPreMenu="false"')," (this will skip you some waiting on each game launch). Setting ",(0,a.kt)("inlineCode",{parentName:"li"},'SaveConfig="false"')," will make sure that the in-game changes don't overwrite changes to this file, and it is recommended to do. You can also set ",(0,a.kt)("inlineCode",{parentName:"li"},'ExitMenuDirectly="true"')," if you wish to exit the game directly, without revisiting the main menu."),(0,a.kt)("li",{parentName:"ol"},"Open ",(0,a.kt)("inlineCode",{parentName:"li"},"user_settings.cfg"),' (in "dev_user" folder), inside the ',(0,a.kt)("inlineCode",{parentName:"li"},"Debug")," element add ",(0,a.kt)("inlineCode",{parentName:"li"},'AllowQuickSave="true"')," (F4=save, F5=load) and change ",(0,a.kt)("inlineCode",{parentName:"li"},'ScriptDebugOn="true"'),".")),(0,a.kt)("p",null,'You can now press F1 in-game to open a debug menu to turn on/off various things and more importantly quick reload the map (F2). This is probably the most important thing to do when editing. When changing a script or adding entities to a map, do NOT restart the game, instead simply press "Quick reload" or F2. If a mesh or texture has been updated (e.g. in an Entity file), you need to press "Reload".'),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"If you start the game with a syntax error in your script file, it will crash. But if you reload the script with F2 with a syntax error, it will instead give you an error description. Therefore it's a good idea to load up the game without errors before making uncertain changes to the script.")),(0,a.kt)("h2",{id:"script-debug"},"Script debug"),(0,a.kt)("p",null,"By setting ",(0,a.kt)("inlineCode",{parentName:"p"},'ScriptDebug="true"')," in the user settings, you can use the script function ",(0,a.kt)("inlineCode",{parentName:"p"},"ScriptDebugOn()")," to conditionally program features based on whether or not debug mode is enabled. For example it allows you to easily add a lantern at the start of a map without having to worry about it ending up in the final release if you were to forget to remove it."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'if (ScriptDebugOn()) {\n    GiveItemFromFile("lantern", "lantern.ent");\n}\n')),(0,a.kt)("p",null,"Create a separate user (such as prod_user) to test how the game works with a non-debug user."),(0,a.kt)("h2",{id:"loading-directly-into-a-map"},"Loading directly into a map"),(0,a.kt)("p",null,"Sometimes it can be useful to make the game directly load into a map when launched, bypassing the time it takes from loading the menu and selecting the correct options."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Open ",(0,a.kt)("inlineCode",{parentName:"li"},"user_settings.cfg")," again, and inside the ",(0,a.kt)("inlineCode",{parentName:"li"},"Map")," element, set ",(0,a.kt)("inlineCode",{parentName:"li"},"Folder")," to the path of your maps folder, and set ",(0,a.kt)("inlineCode",{parentName:"li"},"File")," to the name of the map file you want to load.")))}c.isMDXComponent=!0}}]);